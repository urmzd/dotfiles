#!/usr/bin/env bash
# Load Docker cleanup launchd agent

{{- if .is_macos }}

PLIST_PATH="$HOME/Library/LaunchAgents/com.docker.cleanup.plist"

# Unload if already loaded (ignore errors)
launchctl unload "$PLIST_PATH" 2>/dev/null || true

# Load the agent
if launchctl load "$PLIST_PATH" 2>/dev/null; then
    echo "Docker cleanup launchd agent loaded (runs daily at 3 AM)"
else
    echo "Failed to load Docker cleanup launchd agent"
    exit 1
fi

{{- else }}
echo "Skipping Docker cleanup setup (not macOS)"
{{- end }}
